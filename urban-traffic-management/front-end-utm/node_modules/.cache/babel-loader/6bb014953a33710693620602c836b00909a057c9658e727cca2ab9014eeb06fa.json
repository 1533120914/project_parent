{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"AccuseApplyView\",\n  data() {\n    return {\n      account: null,\n      accuseId: null,\n      accuse: {},\n      reply: null,\n      pictures: []\n    };\n  },\n  methods: {\n    getAccuseDetail() {\n      this.$http.get('/accuse/detail/' + this.accuseId).then(data => {\n        this.accuse = data.accuse;\n        data.pictureList.forEach(pic => {\n          this.pictures.push({\n            name: pic.id,\n            url: 'http://localhost:8888/accuse/picture/download?fileName=' + pic.fileName\n          });\n        });\n      });\n    },\n    handleApply() {\n      this.$http.post('/accuse/apply', {\n        id: this.accuse.id,\n        reply: this.reply,\n        workerId: this.account.id,\n        workerName: this.account.username,\n        state: 1\n      }).then(data => {\n        this.$alert('回复成功!');\n      });\n    }\n  },\n  created() {\n    this.account = JSON.parse(localStorage.getItem('account'));\n    this.accuseId = this.$route.params.id;\n    this.getAccuseDetail();\n  }\n};","map":{"version":3,"names":["name","data","account","accuseId","accuse","reply","pictures","methods","getAccuseDetail","$http","get","then","pictureList","forEach","pic","push","id","url","fileName","handleApply","post","workerId","workerName","username","state","$alert","created","JSON","parse","localStorage","getItem","$route","params"],"sources":["src/views/AccuseApplyView.vue"],"sourcesContent":["<template>\r\n <div>\r\n   <div style=\"display: flex\">\r\n     <el-card class=\"box-card\" style=\"width: 50%;margin-right: 10px\">\r\n       <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n         <span>投诉内容</span>\r\n       </div>\r\n       <div>\r\n         <el-descriptions class=\"margin-top\" :title=\"accuse.title\" :column=\"1\" border>\r\n           <template slot=\"extra\"></template>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉编号\r\n             </template>\r\n             {{ accuse.id }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉标题\r\n             </template>\r\n             {{ accuse.title }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉人\r\n             </template>\r\n             {{ accuse.userName }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               处理人\r\n             </template>\r\n             {{ accuse.workerName }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉日期\r\n             </template>\r\n             {{ accuse.createDate }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               处理日期\r\n             </template>\r\n             {{ accuse.modifyDate }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉状态\r\n             </template>\r\n             <el-tag v-if=\"accuse.state==0\" type=\"info\">未处理</el-tag>\r\n             <el-tag v-if=\"accuse.state==1\" type=\"success\">已处理</el-tag>\r\n           </el-descriptions-item>\r\n         </el-descriptions>\r\n         <!--        <el-button @click=\"handleApply(task.id)\" style=\"margin-top: 20px\" type=\"primary\" v-if=\"account.identity==2 && task.state == 0\">领取任务</el-button>-->\r\n       </div>\r\n     </el-card>\r\n     <el-card class=\"box-card\" style=\"width: 50%;\">\r\n       <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n         <span>投诉详情</span>\r\n       </div>\r\n       <div>\r\n         <el-descriptions class=\"margin-top\" direction=\"vertical\" :title=\"accuse.title\" :column=\"2\" border>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               投诉详情\r\n             </template>\r\n             {{ accuse.description }}\r\n           </el-descriptions-item>\r\n           <el-descriptions-item>\r\n             <template slot=\"label\">\r\n               <i class=\"el-icon-user\"></i>\r\n               图片\r\n             </template>\r\n             <div v-if=\"pictures.length == 0\">\r\n               <el-empty description=\"暂无图片\"></el-empty>\r\n             </div>\r\n             <div v-else>\r\n               <el-image style=\"width: 100px; height: 100px; margin: 10px\" v-for=\"picture in pictures\" :src=\"picture.url\"></el-image>\r\n             </div>\r\n           </el-descriptions-item>\r\n         </el-descriptions>\r\n       </div>\r\n     </el-card>\r\n   </div>\r\n   <el-card v-if=\"account.identity==2 && accuse.state == 0\" class=\"box-card\" style=\"margin-top: 10px\">\r\n     <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n       <span>回复</span>\r\n     </div>\r\n     <div>\r\n       <el-input type=\"textarea\" rows=\"5\" placeholder=\"输入内容回复\" v-model=\"reply\"></el-input>\r\n       <el-button @click=\"handleApply\" style=\"margin-top: 20px\" type=\"primary\" v-if=\"account.identity==2 && account.state == 0\">回复投诉</el-button>\r\n     </div>\r\n   </el-card>\r\n   <el-card v-else class=\"box-card\" style=\"margin-top: 10px\">\r\n     <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n       <span>处理结果</span>\r\n     </div>\r\n     <div>\r\n       <el-input type=\"textarea\" rows=\"5\" readonly v-model=\"accuse.reply\"></el-input>\r\n     </div>\r\n   </el-card>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"AccuseApplyView\",\r\n  data() {\r\n    return {\r\n      account: null,\r\n      accuseId: null,\r\n      accuse: {},\r\n      reply: null,\r\n      pictures:[]\r\n    }\r\n  },\r\n  methods: {\r\n    getAccuseDetail() {\r\n      this.$http.get('/accuse/detail/' + this.accuseId)\r\n          .then((data) => {\r\n            this.accuse = data.accuse\r\n            data.pictureList.forEach((pic) => {\r\n              this.pictures.push({\r\n                name: pic.id,\r\n                url:'http://localhost:8888/accuse/picture/download?fileName=' + pic.fileName\r\n              })\r\n            })\r\n          })\r\n    },\r\n    handleApply() {\r\n      this.$http.post('/accuse/apply', {\r\n        id: this.accuse.id,\r\n        reply: this.reply,\r\n        workerId: this.account.id,\r\n        workerName: this.account.username,\r\n        state: 1\r\n      }).then((data) => {\r\n        this.$alert('回复成功!')\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.account = JSON.parse(localStorage.getItem('account'))\r\n    this.accuseId = this.$route.params.id\r\n    this.getAccuseDetail()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":";AAkHA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MACAC,KAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,gBAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,0BAAAP,QAAA,EACAQ,IAAA,CAAAV,IAAA;QACA,KAAAG,MAAA,GAAAH,IAAA,CAAAG,MAAA;QACAH,IAAA,CAAAW,WAAA,CAAAC,OAAA,CAAAC,GAAA;UACA,KAAAR,QAAA,CAAAS,IAAA;YACAf,IAAA,EAAAc,GAAA,CAAAE,EAAA;YACAC,GAAA,8DAAAH,GAAA,CAAAI;UACA;QACA;MACA;IACA;IACAC,YAAA;MACA,KAAAV,KAAA,CAAAW,IAAA;QACAJ,EAAA,OAAAZ,MAAA,CAAAY,EAAA;QACAX,KAAA,OAAAA,KAAA;QACAgB,QAAA,OAAAnB,OAAA,CAAAc,EAAA;QACAM,UAAA,OAAApB,OAAA,CAAAqB,QAAA;QACAC,KAAA;MACA,GAAAb,IAAA,CAAAV,IAAA;QACA,KAAAwB,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAxB,OAAA,GAAAyB,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,KAAA3B,QAAA,QAAA4B,MAAA,CAAAC,MAAA,CAAAhB,EAAA;IACA,KAAAR,eAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}