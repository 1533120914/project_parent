{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"HomeView\",\n  data() {\n    return {\n      routerFlag: true,\n      account: null\n    };\n  },\n  methods: {\n    logout() {\n      // 销毁存储的account\n      localStorage.removeItem('account');\n      // 回到登录界面\n      this.$router.push('/');\n    },\n    handleAvatarUploadSuccess(response) {\n      this.account.avatar = response.data;\n      localStorage.setItem('account', JSON.stringify(this.account));\n    }\n  },\n  computed: {\n    avatar() {\n      return 'http://localhost:8888/file/download/avatar?fileName=' + this.account.avatar;\n    }\n  },\n  created() {\n    // 立刻从localStorage读取当前用户\n    this.account = JSON.parse(localStorage.getItem('account'));\n  }\n};","map":{"version":3,"names":["name","data","routerFlag","account","methods","logout","localStorage","removeItem","$router","push","handleAvatarUploadSuccess","response","avatar","setItem","JSON","stringify","computed","created","parse","getItem"],"sources":["src/views/HomeView.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-aside width=\"200px\">\r\n      <!-- 菜单组件 router=\"true\"开启菜单路由模式 -->\r\n      <!-- 在子菜单el-menu-item身上指定index=\"路由地址\" -->\r\n      <el-menu :router=\"routerFlag\" class=\"el-menu-vertical-demo\" style=\"height: 100vh\">\r\n        <!-- 用户头像 -->\r\n        <div style=\"display: flex; flex-direction: column; align-items: center;padding: 20px 0px\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              action=\"http://localhost:8888/file/upload/avatar\"\r\n              :data=\"{id: account.id}\"\r\n              :on-success=\"handleAvatarUploadSuccess\"\r\n              :show-file-list=\"false\">\r\n            <img v-if=\"account.avatar\" :src=\"avatar\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n          <div style=\"font-size: 16px;font-weight: bold; color: #409EFF;margin-top: 15px\">\r\n            <span v-if=\"account.identity==1\">管理员:</span>\r\n            <span v-if=\"account.identity==2\">员工:</span>\r\n            {{ account.username}}\r\n          </div>\r\n        </div>\r\n        <el-menu-item index=\"/dept/view\" v-if=\"account.identity==1\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">部门和员工管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/device-type\" v-if=\"account.identity==1\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">设备类型管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/provider\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">供应商采购管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/device/procurement/record\" v-if=\"account.identity==1\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">采购记录管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/statistics\" v-if=\"account.identity==1\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">数据统计</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/device/procurement/record\" v-if=\"account.identity==2\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">我的采购记录</span>\r\n        </el-menu-item>\r\n<!--        <el-menu-item index=\"/personal\">-->\r\n<!--          <i class=\"el-icon-menu\"></i>-->\r\n<!--          <span slot=\"title\">个人信息</span>-->\r\n<!--        </el-menu-item>-->\r\n        <el-menu-item index=\"/modify-password\">\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\">修改密码</span>\r\n        </el-menu-item>\r\n        <el-menu-item>\r\n          <i class=\"el-icon-menu\"></i>\r\n          <span slot=\"title\" @click=\"logout\">退出系统</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </el-aside>\r\n    <!-- 右侧主体 -->\r\n    <el-main style=\"background-color: #f1f1f1; padding: 20px\">\r\n      <!-- 放一个子路由挂载器 -->\r\n      <router-view/>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"HomeView\",\r\n  data() {\r\n    return {\r\n      routerFlag: true,\r\n      account: null\r\n    }\r\n  },\r\n  methods: {\r\n    logout() {\r\n      // 销毁存储的account\r\n      localStorage.removeItem('account')\r\n      // 回到登录界面\r\n      this.$router.push('/')\r\n    },\r\n    handleAvatarUploadSuccess(response) {\r\n      this.account.avatar = response.data\r\n      localStorage.setItem('account', JSON.stringify(this.account))\r\n    }\r\n  },\r\n  computed: {\r\n    avatar() {\r\n      return 'http://localhost:8888/file/download/avatar?fileName=' + this.account.avatar\r\n    }\r\n  },\r\n  created() {\r\n    // 立刻从localStorage读取当前用户\r\n    this.account = JSON.parse(localStorage.getItem('account'))\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n  box-shadow: 0px 0px 5px #8c939d;\r\n}\r\n</style>"],"mappings":";AAsEA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA;MACAC,YAAA,CAAAC,UAAA;MACA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,0BAAAC,QAAA;MACA,KAAAR,OAAA,CAAAS,MAAA,GAAAD,QAAA,CAAAV,IAAA;MACAK,YAAA,CAAAO,OAAA,YAAAC,IAAA,CAAAC,SAAA,MAAAZ,OAAA;IACA;EACA;EACAa,QAAA;IACAJ,OAAA;MACA,qEAAAT,OAAA,CAAAS,MAAA;IACA;EACA;EACAK,QAAA;IACA;IACA,KAAAd,OAAA,GAAAW,IAAA,CAAAI,KAAA,CAAAZ,YAAA,CAAAa,OAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}