{"ast":null,"code":"export default {\n  name: \"DeviceProcurementView\",\n  data() {\n    return {\n      account: null,\n      provider: null,\n      formData: {\n        quantity: null\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '部门名称不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    save() {\n      if (this.formData.quantity && this.formData.quantity < 1) {\n        this.$message.error('请输入正确的采购数量');\n      }\n      this.formData.buyerId = this.account.id;\n      this.formData.deviceTypeId = this.provider.deviceId;\n      this.formData.providerId = this.provider.providerId;\n      this.$http.post('/device-procurement/save', this.formData).then(data => {});\n    }\n  },\n  created() {\n    this.account = JSON.parse(localStorage.getItem('account'));\n    this.provider = this.$route.params;\n  }\n};","map":{"version":3,"names":["name","data","account","provider","formData","quantity","rules","required","message","trigger","methods","save","$message","error","buyerId","id","deviceTypeId","deviceId","providerId","$http","post","then","created","JSON","parse","localStorage","getItem","$route","params"],"sources":["src/views/DeviceProcurementView.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <el-card class=\"box-card\">\r\n    <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n      <span>添加设备采购记录</span>\r\n    </div>\r\n    <div>\r\n      <el-form :model=\"formData\" ref=\"form\" :rules=\"rules\">\r\n        <el-descriptions class=\"margin-top\" :column=\"1\" border>\r\n          <template slot=\"extra\"></template>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              采购设备编号\r\n            </template>\r\n            {{ provider.deviceId }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              采购设备名称\r\n            </template>\r\n            {{ provider.deviceName }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              供应商编号\r\n            </template>\r\n            {{ provider.providerId }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              供应商名称\r\n            </template>\r\n            {{ provider.providerName }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              设备报价\r\n            </template>\r\n            {{ provider.price }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              采购人\r\n            </template>\r\n            {{ account.username }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user\"></i>\r\n              采购数量\r\n            </template>\r\n            <el-input v-model=\"formData.quantity\" placeholder=\"请输入采购数量\"/>\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n        <div style=\"float: right;margin: 20px 0px\">\r\n          <el-button type=\"primary\" @click=\"save\">下单</el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </el-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DeviceProcurementView\",\r\n  data() {\r\n    return {\r\n      account:null,\r\n      provider:null,\r\n      formData:{\r\n        quantity:null\r\n      },\r\n      rules: {\r\n        name:[\r\n          { required: true, message:'部门名称不能为空', trigger:'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    save() {\r\n      if(this.formData.quantity && this.formData.quantity < 1) {\r\n        this.$message.error('请输入正确的采购数量')\r\n      }\r\n      this.formData.buyerId = this.account.id\r\n      this.formData.deviceTypeId = this.provider.deviceId\r\n      this.formData.providerId = this.provider.providerId\r\n      this.$http.post('/device-procurement/save', this.formData)\r\n        .then((data) => {\r\n\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.account = JSON.parse(localStorage.getItem('account'))\r\n    this.provider = this.$route.params\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AAsEA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAN,IAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACAC,KAAA;MACA,SAAAP,QAAA,CAAAC,QAAA,SAAAD,QAAA,CAAAC,QAAA;QACA,KAAAO,QAAA,CAAAC,KAAA;MACA;MACA,KAAAT,QAAA,CAAAU,OAAA,QAAAZ,OAAA,CAAAa,EAAA;MACA,KAAAX,QAAA,CAAAY,YAAA,QAAAb,QAAA,CAAAc,QAAA;MACA,KAAAb,QAAA,CAAAc,UAAA,QAAAf,QAAA,CAAAe,UAAA;MACA,KAAAC,KAAA,CAAAC,IAAA,kCAAAhB,QAAA,EACAiB,IAAA,CAAApB,IAAA,KAEA;IACA;EACA;EACAqB,QAAA;IACA,KAAApB,OAAA,GAAAqB,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,KAAAvB,QAAA,QAAAwB,MAAA,CAAAC,MAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}