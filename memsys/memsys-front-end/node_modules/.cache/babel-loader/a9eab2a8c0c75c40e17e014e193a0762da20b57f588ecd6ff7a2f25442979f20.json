{"ast":null,"code":"export default {\n  name: \"DeptDetailView\",\n  data() {\n    return {\n      account: null,\n      deptId: null,\n      dept: {},\n      employeeList: []\n    };\n  },\n  methods: {\n    getDeptDetail() {\n      this.$http.get('/dept/detail/' + this.deptId).then(data => {\n        this.dept = data.dept;\n        this.employeeList = data.employeeList;\n      });\n    },\n    lock(id, state) {\n      this.$http.post('/account/lock', {\n        id,\n        state\n      }).then(data => {\n        this.getDeptDetail();\n      });\n    }\n  },\n  created() {\n    this.account = JSON.parse(localStorage.getItem('account'));\n    this.deptId = this.$route.params.id;\n    this.getDeptDetail();\n  }\n};","map":{"version":3,"names":["name","data","account","deptId","dept","employeeList","methods","getDeptDetail","$http","get","then","lock","id","state","post","created","JSON","parse","localStorage","getItem","$route","params"],"sources":["src/views/DeptDetailView.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <el-card class=\"box-card\">\r\n    <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n      <span>部门基础信息</span>\r\n    </div>\r\n    <div>\r\n      <el-descriptions class=\"margin-top\" :column=\"4\" direction=\"vertical\" border>\r\n        <template slot=\"extra\"></template>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-user\"></i>\r\n            部门编号\r\n          </template>\r\n          {{ dept.deptId }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-user\"></i>\r\n            部门名称\r\n          </template>\r\n          {{ dept.deptName }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-user\"></i>\r\n            部门负责人\r\n          </template>\r\n          {{ dept.username }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-user\"></i>\r\n            部门人数\r\n          </template>\r\n          {{ dept.count }}\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n    </div>\r\n  </el-card>\r\n  <el-card class=\"box-card\" style=\"margin-top: 10px\">\r\n    <div slot=\"header\" style=\"display: flex; justify-content: space-between;align-items: center\">\r\n      <span>部门员工信息</span>\r\n      <el-button @click=\"$router.push('/account/save?deptId=' + deptId + '&deptName=' + dept.deptName)\" type=\"primary\">添加员工</el-button>\r\n    </div>\r\n    <div>\r\n      <el-table :data=\"employeeList\" stripe border max-height=\"600\" style=\"width: 100%\">\r\n        <el-table-column prop=\"id\" label=\"员工编号\" min-width=\"150\"></el-table-column>\r\n        <el-table-column label=\"员工姓名\" min-width=\"150\">\r\n          <template v-slot=\"scope\">\r\n            <el-tag type=\"success\" v-if=\"scope.row.id==dept.employeeId\">部门负责人：{{ scope.row.username }}</el-tag>\r\n            <span v-else>{{ scope.row.username }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\" min-width=\"150\">\r\n          <template v-slot=\"scope\">\r\n            <el-tag v-if=\"scope.row.sex=='男'\">男</el-tag>\r\n            <el-tag v-else type=\"danger\">女</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"联系方式\" min-width=\"150\"></el-table-column>\r\n        <el-table-column  v-if=\"account.identity==1\"  label=\"操作\" min-width=\"250\">\r\n          <template v-slot=\"scope\">\r\n            <el-button size=\"mini\" v-if=\"scope.row.state==0\" type=\"danger\" @click=\"lock(scope.row.id, 1)\">封号</el-button>\r\n            <el-button size=\"mini\" v-if=\"scope.row.state==1\" type=\"success\" @click=\"lock(scope.row.id, 0)\">解封</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </el-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DeptDetailView\",\r\n  data() {\r\n    return {\r\n      account:null,\r\n      deptId : null,\r\n      dept: {},\r\n      employeeList: []\r\n    }\r\n  },\r\n  methods:{\r\n    getDeptDetail() {\r\n      this.$http.get('/dept/detail/' + this.deptId)\r\n      .then((data) => {\r\n        this.dept = data.dept\r\n        this.employeeList = data.employeeList\r\n      })\r\n    },\r\n    lock(id,state) {\r\n      this.$http.post('/account/lock', {\r\n        id,state\r\n      }).then((data) => {\r\n        this.getDeptDetail()\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.account = JSON.parse(localStorage.getItem('account'))\r\n    this.deptId = this.$route.params.id\r\n    this.getDeptDetail()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AA0EA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,MAAA;MACAC,IAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,wBAAAN,MAAA,EACAO,IAAA,CAAAT,IAAA;QACA,KAAAG,IAAA,GAAAH,IAAA,CAAAG,IAAA;QACA,KAAAC,YAAA,GAAAJ,IAAA,CAAAI,YAAA;MACA;IACA;IACAM,KAAAC,EAAA,EAAAC,KAAA;MACA,KAAAL,KAAA,CAAAM,IAAA;QACAF,EAAA;QAAAC;MACA,GAAAH,IAAA,CAAAT,IAAA;QACA,KAAAM,aAAA;MACA;IACA;EACA;EACAQ,QAAA;IACA,KAAAb,OAAA,GAAAc,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,KAAAhB,MAAA,QAAAiB,MAAA,CAAAC,MAAA,CAAAT,EAAA;IACA,KAAAL,aAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}